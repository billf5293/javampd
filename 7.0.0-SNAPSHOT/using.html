<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 at 2022-02-07 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20220207" />
    <meta http-equiv="Content-Language" content="en" />
    <title>JavaMPD &#x2013; Connecting</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarEnabled">
          
    
    
            
    
        
    <a href="https://github.com/finnyb/javampd">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                        
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                                  <div class="container"><div class="nav-collapse">
            
                
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Download <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="download.html"  title="Download">Download</a>
</li>
                  
                      <li>      <a href="license.html"  title="License">License</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="using.html"  title="Using">Using</a>
</li>
                  
                      <li>      <a href="apidocs/index.html"  title="Java Docs">Java Docs</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="http://github.com/finnyb/javampd/issues/"  title="Issues">Issues</a>
</li>
                  
                      <li>      <a href="http://github.com/finnyb/javampd/"  title="Fork on GitHub">Fork on GitHub</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Maven Docs <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="index.html"  title="About">About</a>
</li>
                                  <li>      <a href="team.html"  title="Team">Team</a>
</li>
                                  <li>      <a href="licenses.html"  title="Licenses">Licenses</a>
</li>
                                  <li>      <a href="dependencies.html"  title="Dependencies">Dependencies</a>
</li>
                                  <li>      <a href="dependency-convergence.html"  title="Dependency Convergence">Dependency Convergence</a>
</li>
                                  <li>      <a href="distribution-management.html"  title="Distribution Management">Distribution Management</a>
</li>
                                  <li>      <a href="plugin-management.html"  title="Plugin Management">Plugin Management</a>
</li>
                                  <li>      <a href="ci-management.html"  title="CI Management">CI Management</a>
</li>
                                  <li>      <a href="issue-management.html"  title="Issue Management">Issue Management</a>
</li>
                                  <li>      <a href="scm.html"  title="Source Code Management">Source Code Management</a>
</li>
                                  <li>      <a href="summary.html"  title="Summary">Summary</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="dependency-updates-report.html"  title="Dependency Updates Report">Dependency Updates Report</a>
</li>
                                  <li>      <a href="plugin-updates-report.html"  title="Plugin Updates Report">Plugin Updates Report</a>
</li>
                                  <li>      <a href="apidocs/index.html"  title="Javadoc">Javadoc</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
                                                                            
                               <ul class="nav pull-right">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">External Links <b class="caret"></b></a>
                <ul class="dropdown-menu">
                      <li>      <a href="http://github.com/finnyb/javampd"  title="GitHub">GitHub</a>
</li>
      <li>      <a href="http://bjj.is-a-player.com:8080"  title="Travis">Travis</a>
</li>
      <li>      <a href="http://bjj.is-a-player.com:9000/dashboard/index/1"  title="Sonar">Sonar</a>
</li>
                  </ul>
              </li>
            </ul>
          
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>JavaMPD</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="projectVersion">Version: 7.0.0-SNAPSHOT
                    </li>
              
              
                  <li id="publishDate" class="pull-right">Last Published: 2022-02-07</li>
            
                            </ul>
      </div>

      
                
        <div id="bodyColumn" >
                                  
            <section>
<h2><a name="Connecting"></a>Connecting</h2>
<p>Create a connection to MPD using the builder.</p>
<p>Using default values of localhost port 6600</p>

<div class="source">
<div class="source"><pre class="prettyprint">MPD mpd = new MPD.Builder().build();
</pre></div></div>

<p>or build to your environment</p>

<div class="source">
<div class="source"><pre class="prettyprint">MPD mpd = new MPD.Builder()
        .server(&quot;yourserver&quot;)
        .port(yourport)
        .password(yourpassword)
        .build();
</pre></div></div>

<p>Almost everything you&#x2019;ll need will be gotten from this object.</p>
<p>The connection remains open for the life of the MPD object so take care not to create new MPD objects each time you want to do something. Call close on the object when you are done.</p></section><section>
<h2><a name="Art"></a>Art</h2>
<p>When running on the same server as MPD a list of artwork can be obtained for an artist or album.  If not running on the same server but hosting the images locally a path prefix can be passed to locate the images.</p>
<p>A list of all images in the directory can be returned if those files are readable by whatever user is running JavaMPD.</p>
<p>Ideally you should have some directory structure like /Artist/Album/song.flac /Artist/Album/cover.jpg</p>
<p>When searching for artist images assumptions are made that the artist lives in her own directory.  Images in the artist directory are returned first then images for each album are returned.</p>
<p>supported image types: <i>jpg</i> and <i>png</i></p>

<div class="source">
<div class="source"><pre class="prettyprint">ArtworkFinder artworkFinder = mpd.getArtworkFinder();
List&lt;MPDArtwork&gt; artworkList = artworkFinder.find(album);
</pre></div></div>
</section><section>
<h2><a name="Searching"></a>Searching</h2>
<p>Searching for songs is done via the SongSearcher class.</p>

<div class="source">
<div class="source"><pre class="prettyprint">mpd.getSongSearcher();
</pre></div></div>
</section><section>
<h2><a name="Querying"></a>Querying</h2>
<p>MPD database access is accomplished using the appropriate access object from the MPDMusicDatabase.</p>
<p>Get the database from MPD.</p>

<div class="source">
<div class="source"><pre class="prettyprint">mpd.getMusicDatabase();
</pre></div></div>

<p>There is a database for the following:</p>
<ul>

<li>Songs</li>
<li>Albums</li>
<li>Artists</li>
<li>Genres</li>
<li>Years</li>
<li>Playlists</li>
<li>Files</li>
</ul></section><section>
<h2><a name="Logging"></a>Logging</h2>
<p><a class="externalLink" href="http://www.slf4j.org/">slf4j</a> is used for logging allowing you to use any compatible logging framework. The following examples use <a class="externalLink" href="http://logback.qos.ch/">logback</a>.</p>
<p>Lots of debugging information can be obtained from debug level logging.</p>

<div class="source">
<div class="source"><pre class="prettyprint">...
&lt;root level=&quot;debug&quot;&gt;
    &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;
&lt;/root&gt;
...
</pre></div></div>
</section><section>
<h2><a name="Monitoring"></a>Monitoring</h2>
<p>MPDStandAloneMonitor to monitor events</p><section><section>
<h4><a name="Refresh_Intervals"></a>Refresh Intervals</h4>
<p>The monitor.delay property is the length of time (in seconds) that the monitor sleeps between rounds. Each monitor has a multiplier that can be overridden depending on the desired check frequency.  Setting the multiplier value to 0 means checking every time the monitor runs (0 based).</p>
<p>The following properties can be overridden:</p>

<div class="source">
<div class="source"><pre class="prettyprint">monitor.delay

monitor.output.multiplier
monitor.connection.multiplier
monitor.playlist.multiplier
monitor.error.multiplier
monitor.player.multiplier
monitor.track.multiplier
monitor.exception.multiplier
</pre></div></div>

<p>To override place a javampd.properties file on the classpath with your desired overrides:</p>
<p>For example:</p>
<p>javampd.properties</p>

<div class="source">
<div class="source"><pre class="prettyprint">monitor.playlist.multiplier=4
</pre></div></div>

<p>would check for playlist changes every ~5 seconds</p>
<p>or maybe something list this:</p>
<p>javampd.properties</p>

<div class="source">
<div class="source"><pre class="prettyprint">monitor.delay=10
monitor.playlist.multiplier=0
monitor.track.multiplier=2
</pre></div></div>

<p>would run the monitor every ~10 seconds checking the playlist every ~10 seconds and the track every ~30</p></section></section></section><section>
<h2><a name="Server_status"></a>Server status</h2>
<p>load the server status by getting the status from MPD.</p>

<div class="source">
<div class="source"><pre class="prettyprint">ServerStatus status = mpd.getServerStatus();
int volume = status.getVolume();
</pre></div></div>

<p>There is a default expiry interval of 5 seconds. This can be overridden by setting the interval using setExpiryInterval, use 0 to always call the server for each method.</p>

<div class="source">
<div class="source"><pre class="prettyprint">ServerStatus status = mpd.getServerStatus();
//removes 5 second cache
status.setExpiryInterval(0);    
</pre></div></div>

<p>Status updates can be force using forceUpdate</p>

<div class="source">
<div class="source"><pre class="prettyprint">ServerStatus status = mpd.getServerStatus();
//reset the update clock so updates are pulled
status.forceUpdate();
</pre></div></div>
</section><section>
<h2><a name="Server_statistics"></a>Server statistics</h2>
<p>load the server statistics by getting the status from MPD.</p>

<div class="source">
<div class="source"><pre class="prettyprint">ServerStatistics stats = mpd.getServerStatistics();
long uptime = status.getUptime();
</pre></div></div>

<p>It has an default expiry interval of 60 seconds.  Caching behavior is exactly like the status.</p></section>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
                      <div class="row">
                                      <p >Copyright &copy;                   2022.
          All rights reserved.    
      </p>
                </div>

                <p id="poweredBy" class="pull-right">
                          <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
              </p>
        
                </div>
    </footer>
        </body>
</html>
